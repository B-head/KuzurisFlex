<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/halo"
		 xmlns:v="view.*">
		 
	<fx:Script>
		<![CDATA[
		import model.*;
		
		[Bindable] 
		public var gameModel:GameModel;
		[Bindable] 
		public var blockGraphics:BlockGraphics;
		[Bindable] 
		public var reverse:Boolean
		
		public function update():void
		{
			var blockWidth:int = blockGraphics.blockWidth;
			var blockHeight:int = blockGraphics.blockHeight;
			fall.y = gameModel.ffy * blockHeight - 224;
			ghost.x = gameModel.cox * blockWidth + 120;
			ghost.y = gameModel.goy * blockHeight - 224;
			control.x = gameModel.cox * blockWidth + 120;
			control.y = gameModel.coy * blockHeight - 224;
			var light:GameLightModel = gameModel.getLightModel();
			var shockSave:Boolean = gameModel.shockSave;
			main.update(light.mainField, shockSave);
			fall.update(light.fallField, shockSave);
			ghost.update(light.controlOmino, shockSave);
			control.update(light.controlOmino, shockSave);
			next.update(light.nextOmino, shockSave);
		}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<s:Group x="{reverse ? 304 : 0}" y="96">
		<s:Label y="0" text="レベル"/>
		<s:Label y="32" text="ライン"/>
		<s:Label y="64" text="タイム"/>
		<s:Label y="96" text="スコア"/>
		<s:Label y="128" text="次のおじゃま"/>
	</s:Group>
	<v:NextOminoView x="{reverse ? 0 : 304}" y="96" id="next" blockGraphics="{blockGraphics}" reverse="{reverse}"/>
	<s:Image  x="104" y="96" source="@Embed('../graphic/frame.png')"/>
	<v:BlockFieldView id="main" spritesLength="400" blockGraphics="{blockGraphics}" x="120" y="-224" showSpecial="true"/>
	<v:BlockFieldView id="fall" spritesLength="400" blockGraphics="{blockGraphics}"  x="120" showSpecial="true"/>
	<v:BlockFieldView id="ghost" spritesLength="100" blockGraphics="{blockGraphics}" showSpecial="true" alpha="0.5"/>
	<v:BlockFieldView id="control" spritesLength="100" blockGraphics="{blockGraphics}" showSpecial="true"/>
</s:Group>